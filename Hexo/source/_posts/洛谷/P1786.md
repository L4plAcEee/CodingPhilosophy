## Daily::算法 @[P1786 帮贡排序](https://www.luogu.com.cn/problem/P1786)
### 题目描述
在 absi2011 的帮派里，死号偏多。现在 absi2011 和帮主等人联合决定，要清除一些死号，加进一些新号，同时还要鼓励帮贡多的人，对帮派进行一番休整。

目前帮派内共最多有一位帮主，两位副帮主，两位护法，四位长老，七位堂主，二十五名精英，帮众若干。

现在 absi2011 要对帮派内几乎所有人的职位全部调整一番。他发现这是个很难的事情。于是要求你帮他调整。

他给你每个人的以下数据：

他的名字（长度不会超过 30），他的原来职位，他的帮贡，他的等级。

他要给帮贡最多的护法的职位，其次长老，以此类推。

可是，乐斗的显示并不按帮贡排序而按职位和等级排序。

他要你求出最后乐斗显示的列表(在他调整过职位后)：职位第一关键字，等级第二关键字。

注意：absi2011 无权调整帮主、副帮主的职位，包括他自己的（这不是废话么..）

他按原来的顺序给你（所以，等级相同的，原来靠前的现在也要靠前，因为经验高低的原因，但此处为了简单点省去经验。）

输入格式
	第一行一个正整数 n，表示星月家园内帮友的人数。
	下面 n 行每行两个字符串两个整数，表示每个人的名字、职位、帮贡、等级。

输出格式
	一共输出 n 行，每行包括排序后乐斗显示的名字、职位、等级。

### 思路
模拟题，先捋顺思路，怎么样去模拟。
首先，要明细：
> 1. 帮派内共最多有一位帮主，两位副帮主，两位护法，四位长老，七位堂主，二十五名精英，帮众若干。
> 2. 数据输入保证有一名帮主，保证有两名副帮主，保证有一名副帮主叫 absi2011，不保证一开始帮派里所有职位都是满人的，但排序后分配职务请先分配高级职位。例如原来设一名护法现在设两名。
> 3. 可是，乐斗的显示并不按帮贡排序而按职位和等级排序。
> 4. 他按原来的顺序给你（所以，等级相同的，原来靠前的现在也要靠前，因为经验高低的原因，但此处为了简单点省去经验。）

那就维护一个映射，维护每个职位的数量。
然后排序之后在参考映射在保证合法的情况下分配职位。
那很明显，题目关键就是 结构体， 排序（自定义排序规则）了

### 提交#0 <-WA
示例过了，但是其他全WA了，有意思。
哦 其实没过，我tm的没有按照原始顺序。

### 提交#1 <-AC
改动点很简单，在结构体加入输入顺序属性，并在比较规则加入比较输入顺序。

#### 关键代码
```cpp
    stable_sort(v.begin(), v.end(), [](auto const &a, auto const &b){
        if (a.job != b.job) {
            return mapper[a.job] < mapper[b.job];
        } else if (a.level != b.level) {
            return a.level > b.level;
        } else {
            return a.input_order < b.input_order;  // 当职位和等级相同时，按输入顺序排序
        }
    });
```

#### 关键点
主要就是要理清题目给的规则。

---
