## Daily::ç®—æ³• @[P1160 é˜Ÿåˆ—å®‰æ’](https://www.luogu.com.cn/training/113#problems)
> å¯¹äºÂ 100%Â çš„æ•°æ®ï¼Œ$1<Mâ‰¤Nâ‰¤10^5$ã€‚

æ•°æ®å¼±çš„è¯ï¼Œç›´æ¥eraseåº”è¯¥èƒ½è¿‡ã€‚

å½“ç„¶ï¼Œè¿™é“é¢˜åº”è¯¥æ˜¯è¦æ‹¿é“¾è¡¨æ¨¡æ‹Ÿäººæ’é˜Ÿï¼Œä½†æ˜¯å¹¶ä¸éœ€è¦çœŸçš„å†™é“¾è¡¨ï¼Œ
å¯ä»¥ç”¨é™æ€æ•°ç»„æ¨¡æ‹Ÿè·³è½¬ç»“æ„ã€‚
### å‹˜è¯¯
#### è¾¹ç•Œæ¡ä»¶
**åŸæ¥çš„é¢˜è§£ä¹‹æ‰€ä»¥å‡ºç°é”™è¯¯ï¼Œä¸»è¦åŸå› æ­£æ˜¯æ²¡æœ‰å¤„ç†â€œé‡å¤åˆ é™¤åŒä¸€ä¸ªäººâ€çš„æƒ…å†µ**ã€‚è¿™æ˜¯ä¸€ä¸ª**æ˜“è¢«å¿½ç•¥ä½†è‡´å‘½çš„è¾¹ç•Œæ¡ä»¶**ã€‚

åœ¨ä½ çš„åŸå§‹ä»£ç ä¸­ï¼Œåˆ é™¤æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š
```cpp
int pre_v = pre[tg], nxt_v = nxt[tg];
nxt[pre_v] = nxt_v;
pre[nxt_v] = pre_v;
pre[tg] = 0;
nxt[tg] = 0;
```
è¿™æ®µä»£ç é»˜è®¤ï¼š

1. `tg` è¿˜åœ¨é“¾è¡¨ä¸­ï¼›
    
2. `pre[tg]` å’Œ `nxt[tg]` éƒ½æ˜¯æœ‰æ•ˆçš„é‚»æ¥èŠ‚ç‚¹ã€‚
ğŸ‘‰ ç„¶è€Œï¼Œ**é¢˜ç›®ä¸­æ˜ç¡®æŒ‡å‡ºï¼šå¦‚æœæŸä¸ªåŒå­¦å·²ç»ä¸åœ¨é˜Ÿåˆ—ä¸­ï¼Œå¿½ç•¥æ­¤æ“ä½œ**ã€‚

#### åœ¨**æ’å…¥æ“ä½œ**é‡Œè¿™æ®µä»£ç æœ‰é€»è¾‘é”™è¯¯
ä½ åŸä»£ç æ˜¯ï¼š
```cpp
if (op == 1) {
    int tmp = nxt[tg];
    nxt[i] = tmp;
    pre[i] = i;
    nxt[tg] = i;
    pre[tmp] = i;
}

```
å†™äº† `pre[i] = i` å’Œ `nxt[i] = i`ï¼Œè¿™æ˜¯å®Œå…¨é”™è¯¯çš„ã€‚
### è§£
```cpp
const int MAXN = 1e5 + 5;
int n, m, nxt[MAXN] = {0}, pre[MAXN] = {0};

int main() {
    cin >> n;
    nxt[0] = 1;
    for (int i = 2; i <= n; ++i) {
        int tg = -1, op = -1;
        cin >> tg >> op;
        if (op == 1) {
            int tmp = nxt[tg];
            nxt[tg] = i;
            pre[i] = tg;
            nxt[i] = tmp;
            pre[tmp] = i;
        } else {
            int tmp = pre[tg];
            nxt[i] = tg;
            pre[i] = tmp;
            nxt[tmp] = i;
            pre[tg] = i;
        }
    }

    int m;
    cin >> m;
    while (m--) {
        int tg = -1;
        cin >> tg;
        int pre_v = pre[tg], nxt_v = nxt[tg];
        if (pre_v == 0 && nxt_v == 0) continue;
        nxt[pre_v] = nxt_v;
        pre[nxt_v] = pre_v;
        pre[tg] = 0;
        nxt[tg] = 0;
    }

    int head = 0;
    while (nxt[head]) {
        head = nxt[head];
        cout << head << ' ';
    }
}
```

---
